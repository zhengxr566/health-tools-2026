{% extends "base.html" %}
{% block title %}é¦–é¡µ - å¥åº·å·¥å…·ç«™{% endblock %}

{% block content %}

<!-- Hero -->
<div class="bg-white rounded-3 shadow-sm p-4 p-md-5 mb-4">
  <div class="row align-items-center g-3">
    <div class="col-md-8">
      <h1 class="h3 mb-2">å…è´¹åœ¨çº¿å¥åº·è®¡ç®—å·¥å…·</h1>
      <p class="text-muted mb-0">
        å¿«é€Ÿã€å…è´¹ã€æ— éœ€æ³¨å†Œã€‚è¾“å…¥æ•°æ®åªç”¨äºå®æ—¶è®¡ç®—ï¼Œä¸åœ¨æœåŠ¡å™¨ä¿å­˜ã€‚
      </p>
    </div>
    <div class="col-md-4">
      <div class="input-group">
        <span class="input-group-text">ğŸ”</span>
        <input id="toolSearch" type="text" class="form-control" placeholder="æœç´¢ï¼šBMI / é¥®æ°´ / ç¡çœ ...">
      </div>
      <div class="form-text">è¾“å…¥å…³é”®è¯ï¼Œä¸‹é¢ä¼šè‡ªåŠ¨ç­›é€‰å·¥å…·å¡ç‰‡ã€‚</div>
    </div>
  </div>
</div>

<!-- Quick categories -->
<div class="d-flex flex-wrap gap-2 mb-3">
  <button class="btn btn-outline-secondary btn-sm active" data-filter="all">å…¨éƒ¨</button>
  {% set cats = tools | map(attribute='category') | list %}
  {% for c in cats | unique %}
    <button class="btn btn-outline-secondary btn-sm" data-filter="{{ c }}">{{ c }}</button>
  {% endfor %}
</div>

<!-- Tools grid -->
<div class="row g-3" id="toolGrid">
  {% for t in tools %}
    <div class="col-12 col-md-6 col-lg-4 tool-card"
         data-name="{{ t.name|lower }}"
         data-desc="{{ t.desc|lower }}"
         data-cat="{{ t.category }}"
         data-kw="{{ (t.keywords or []) | join(' ') | lower }}">
      <div class="card h-100 shadow-sm">
        <div class="card-body d-flex flex-column">
          <div class="d-flex align-items-start justify-content-between">
            <h2 class="h5 mb-1">{{ t.name }}</h2>
            <span class="badge text-bg-light">{{ t.category }}</span>
          </div>
          <p class="text-muted mt-2 mb-3">{{ t.desc }}</p>
          <div class="mt-auto">
            <a class="btn btn-primary w-100" href="{{ t.url }}">å¼€å§‹ä½¿ç”¨</a>
          </div>
        </div>
      </div>
    </div>
  {% endfor %}
</div>

<!-- SEO / trust block -->
<div class="bg-white rounded-3 shadow-sm p-4 mt-4">
  <h2 class="h5">ä½¿ç”¨è¯´æ˜</h2>
  <ul class="text-muted mb-0">
    <li>æœ¬ç½‘ç«™å·¥å…·ç”¨äºå¥åº·çŸ¥è¯†å‚è€ƒï¼Œä¸æ„æˆåŒ»ç–—å»ºè®®ã€‚</li>
    <li>è¾“å…¥æ•°æ®ä»…ç”¨äºå³æ—¶è®¡ç®—ï¼Œä¸åœ¨æœåŠ¡å™¨ç«¯ä¿å­˜ã€‚</li>
    <li>å»ºè®®ç»“åˆè‡ªèº«æƒ…å†µä¸ä¸“ä¸šæ„è§è¿›è¡Œå¥åº·ç®¡ç†ã€‚</li>
  </ul>
</div>

<script>
(function(){
  const search = document.getElementById("toolSearch");
  const cards = Array.from(document.querySelectorAll(".tool-card"));
  const filterButtons = Array.from(document.querySelectorAll("[data-filter]"));

  let activeCat = "all";

  function applyFilter() {
    const q = (search.value || "").trim().toLowerCase();
    cards.forEach(card => {
      const cat = card.dataset.cat;
      const hay = (card.dataset.name + " " + card.dataset.desc + " " + card.dataset.kw);
      const matchCat = (activeCat === "all") || (cat === activeCat);
      const matchQ = (!q) || hay.includes(q);
      card.style.display = (matchCat && matchQ) ? "" : "none";
    });
  }

  filterButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      filterButtons.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      activeCat = btn.dataset.filter;
      applyFilter();
    });
  });

  search.addEventListener("input", applyFilter);
})();
</script>

{% endblock %}
